
import discord
from discord.ext import commands
import youtube_dl

class Template(commands.Cog):
    def __init__(self, bot):
        self.bot = bot

    @commands.Cog.listener()
    async def on_ready(self):
        print('template loaded')

    @commands.command()
    async def join(self, ctx, url_ : str):
        voiceChannel = discord.utils.get(ctx.guild.voice_channels, name="bot-testing-voice")
        voice = discord.utils.get(self.bot.voice_clients, guild=ctx.guild)
        if not voice.is_connected():
            await voiceChannel.connect()

    @commands.command()
    async def play(self, ctx, url_ : str):
        voiceChannel = discord.utils.get(ctx.guild.voice_channels, name="bot-testing-voice")
        voice = discord.utils.get(self.bot.voice_clients, guild=ctx.guild)
        if not voice.is_connected():
            await voiceChannel.connect()
    
    @commands.command()
    async def pause(self, ctx):
        voice = discord.utils.get(self.bot.voice_clients, guild=ctx.guild)
        if voice.is_playing():
            voice.pause()

    @commands.command()
    async def resume(self, ctx):
        voice = discord.utils.get(self.bot.voice_clients, guild=ctx.guild)
        if voice.is_paused():
            voice.resume()
    
    @commands.command()
    async def stop(self, ctx):
        voice = discord.utils.get(self.bot.voice_clients, guild=ctx.guild)
        voice.stop()
    
    @commands.command()
    async def leave(self, ctx):
        voice = discord.utils.get(self.bot.voice_clients, guild=ctx.guild)
        if voice.is_connected():
            await voice.disconnet()

def setup(bot):
    bot.add_cog(Template(bot))